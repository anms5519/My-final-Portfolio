<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #4ecca3;
            --primary-dark: #2e8b6f;
            --secondary-color: #6b7b9c;
            --accent-color: #ff6b6b;
            --light-color: #f8f9fd;
            --dark-color: #1c2035;
            --dark-bg: #151823;
            --card-bg: rgba(28, 32, 53, 0.8);
            --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            --glass-effect: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.18);
            --border-radius: 12px;
            --transition-speed: 0.3s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--dark-bg);
            color: var(--light-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            margin-bottom: 30px;
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .search-container {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
            backdrop-filter: blur(10px);
        }

        .search-form {
            display: flex;
            gap: 15px;
        }

        .search-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid var(--glass-border);
            border-radius: var(--border-radius);
            background: var(--glass-effect);
            color: var(--light-color);
            font-size: 16px;
            transition: all var(--transition-speed) ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(78, 204, 163, 0.3);
        }

        .search-btn, .location-btn {
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius);
            background: var(--primary-color);
            color: var(--dark-color);
            font-size: 16px;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .location-btn {
            background: var(--secondary-color);
        }

        .search-btn:hover, .location-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .search-btn:hover {
            background: var(--primary-dark);
        }

        .location-btn:hover {
            background: #5a6a89;
        }

        .weather-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .current-weather, .forecast-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(10px);
            transition: transform var(--transition-speed) ease;
        }

        .current-weather {
            min-height: 300px;
        }

        .current-weather:hover, .forecast-card:hover {
            transform: translateY(-5px);
        }

        .location-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .location-name {
            font-size: 1.8rem;
            font-weight: 600;
        }

        .current-date {
            font-size: 0.9rem;
            color: var(--secondary-color);
        }

        .current-temp {
            font-size: 3.5rem;
            font-weight: 700;
            margin: 20px 0;
            color: var(--primary-color);
        }

        .weather-icon {
            margin-right: 10px;
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .weather-icon.large {
            font-size: 2.5rem;
            margin-right: 15px;
        }

        .weather-description {
            font-size: 1.2rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .weather-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            font-size: 0.95rem;
        }

        .forecast-title {
            font-size: 1.6rem;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .forecast-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .forecast-day {
            background: rgba(28, 32, 53, 0.6);
            padding: 15px;
            border-radius: var(--border-radius);
            text-align: center;
            border: 1px solid var(--glass-border);
        }

        .forecast-date {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .forecast-icon {
            font-size: 1.8rem;
            margin: 15px 0;
            color: var(--primary-color);
        }

        .forecast-temp {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .forecast-temp-min {
            font-size: 0.9rem;
            color: var(--secondary-color);
            margin-top: 5px;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 1.2rem;
            color: var(--secondary-color);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(78, 204, 163, 0.3);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            margin-right: 15px;
            animation: spin 1s linear infinite;
        }

        .error-message {
            background-color: rgba(255, 107, 107, 0.2);
            border: 1px solid var(--accent-color);
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .hidden {
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hourly-forecast {
            margin-top: 30px;
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(10px);
        }

        .hourly-scroll {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 10px 5px;
            scroll-behavior: smooth;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--dark-color);
        }

        .hourly-scroll::-webkit-scrollbar {
            height: 8px;
        }

        .hourly-scroll::-webkit-scrollbar-track {
            background: var(--dark-color);
            border-radius: 10px;
        }

        .hourly-scroll::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 10px;
        }

        .hourly-item {
            min-width: 100px;
            padding: 15px;
            background: rgba(28, 32, 53, 0.6);
            border-radius: var(--border-radius);
            text-align: center;
            border: 1px solid var(--glass-border);
            flex: 0 0 auto;
        }

        .hourly-time {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .search-form {
                flex-direction: column;
            }

            .weather-details {
                grid-template-columns: 1fr;
            }

            .forecast-container {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
        }

        .weather-map {
            margin-top: 30px;
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(10px);
        }

        .map-container {
            height: 300px;
            width: 100%;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-top: 15px;
        }

        #map {
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-cloud-sun"></i> Weather Dashboard</h1>
            <p>Check current weather and forecast for any location worldwide</p>
        </header>

        <div class="search-container">
            <div class="error-message hidden" id="errorMessage">
                <i class="fas fa-exclamation-circle"></i>
                <span id="errorText"></span>
            </div>
            <form class="search-form" id="searchForm">
                <input type="text" class="search-input" id="searchInput" placeholder="Enter city name or zip code...">
                <button type="submit" class="search-btn">
                    <i class="fas fa-search"></i> Search
                </button>
                <button type="button" class="location-btn" id="locationBtn">
                    <i class="fas fa-map-marker-alt"></i> Current Location
                </button>
            </form>
        </div>

        <div class="loading hidden" id="loadingIndicator">
            <div class="loading-spinner"></div>
            <span>Loading weather data...</span>
        </div>

        <div class="weather-content hidden" id="weatherContent">
            <div class="weather-display">
                <div class="current-weather">
                    <div class="location-info">
                        <h2 class="location-name" id="locationName">City Name</h2>
                        <span class="current-date" id="currentDate">Date</span>
                    </div>
                    <div class="weather-description">
                        <i class="weather-icon large" id="weatherIcon"></i>
                        <span id="weatherDescription">Weather Description</span>
                    </div>
                    <div class="current-temp" id="currentTemp">--°C</div>
                    <div class="weather-details">
                        <div class="detail-item">
                            <i class="weather-icon fas fa-temperature-high"></i>
                            <span>Feels like: <span id="feelsLike">--°C</span></span>
                        </div>
                        <div class="detail-item">
                            <i class="weather-icon fas fa-wind"></i>
                            <span>Wind: <span id="windSpeed">-- km/h</span></span>
                        </div>
                        <div class="detail-item">
                            <i class="weather-icon fas fa-tint"></i>
                            <span>Humidity: <span id="humidity">--%</span></span>
                        </div>
                        <div class="detail-item">
                            <i class="weather-icon fas fa-compass"></i>
                            <span>Pressure: <span id="pressure">-- hPa</span></span>
                        </div>
                        <div class="detail-item">
                            <i class="weather-icon fas fa-sun"></i>
                            <span>Sunrise: <span id="sunrise">--:--</span></span>
                        </div>
                        <div class="detail-item">
                            <i class="weather-icon fas fa-moon"></i>
                            <span>Sunset: <span id="sunset">--:--</span></span>
                        </div>
                    </div>
                </div>

                <div class="forecast-card">
                    <h3 class="forecast-title">5-Day Forecast</h3>
                    <div class="forecast-container" id="forecastContainer">
                        <!-- Forecast days will be inserted here -->
                    </div>
                </div>
            </div>

            <div class="hourly-forecast">
                <h3 class="forecast-title">Hourly Forecast</h3>
                <div class="hourly-scroll" id="hourlyContainer">
                    <!-- Hourly forecast items will be inserted here -->
                </div>
            </div>

            <div class="weather-map">
                <h3 class="forecast-title">Weather Map</h3>
                <div class="map-container">
                    <div id="map"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const searchForm = document.getElementById('searchForm');
        const searchInput = document.getElementById('searchInput');
        const locationBtn = document.getElementById('locationBtn');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const weatherContent = document.getElementById('weatherContent');

        // Current weather elements
        const locationName = document.getElementById('locationName');
        const currentDate = document.getElementById('currentDate');
        const weatherIcon = document.getElementById('weatherIcon');
        const weatherDescription = document.getElementById('weatherDescription');
        const currentTemp = document.getElementById('currentTemp');
        const feelsLike = document.getElementById('feelsLike');
        const windSpeed = document.getElementById('windSpeed');
        const humidity = document.getElementById('humidity');
        const pressure = document.getElementById('pressure');
        const sunrise = document.getElementById('sunrise');
        const sunset = document.getElementById('sunset');

        // Forecast elements
        const forecastContainer = document.getElementById('forecastContainer');
        const hourlyContainer = document.getElementById('hourlyContainer');

        // API key (for demo - in production use environment variables)
        const weatherAPIKey = 'demo-key'; // Replace with your OpenWeatherMap API key

        // Weather icons mapping
        const weatherIcons = {
            '01d': 'fas fa-sun',
            '01n': 'fas fa-moon',
            '02d': 'fas fa-cloud-sun',
            '02n': 'fas fa-cloud-moon',
            '03d': 'fas fa-cloud',
            '03n': 'fas fa-cloud',
            '04d': 'fas fa-cloud',
            '04n': 'fas fa-cloud',
            '09d': 'fas fa-cloud-showers-heavy',
            '09n': 'fas fa-cloud-showers-heavy',
            '10d': 'fas fa-cloud-sun-rain',
            '10n': 'fas fa-cloud-moon-rain',
            '11d': 'fas fa-bolt',
            '11n': 'fas fa-bolt',
            '13d': 'fas fa-snowflake',
            '13n': 'fas fa-snowflake',
            '50d': 'fas fa-smog',
            '50n': 'fas fa-smog'
        };

        // Event Listeners
        searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const location = searchInput.value.trim();
            if (location) {
                getWeatherByLocation(location);
            }
        });

        locationBtn.addEventListener('click', () => {
            if (navigator.geolocation) {
                showLoading();
                navigator.geolocation.getCurrentPosition(
                    position => {
                        const { latitude, longitude } = position.coords;
                        getWeatherByCoordinates(latitude, longitude);
                    },
                    error => {
                        hideLoading();
                        showError("Could not access your location. " + error.message);
                    }
                );
            } else {
                showError("Geolocation is not supported by your browser.");
            }
        });

        // Helper Functions
        function showLoading() {
            loadingIndicator.classList.remove('hidden');
            weatherContent.classList.add('hidden');
            errorMessage.classList.add('hidden');
        }

        function hideLoading() {
            loadingIndicator.classList.add('hidden');
        }

        function showError(message) {
            errorText.textContent = message;
            errorMessage.classList.remove('hidden');
        }

        function hideError() {
            errorMessage.classList.add('hidden');
        }

        function formatDate(timestamp) {
            const date = new Date(timestamp * 1000);
            return date.toLocaleDateString('en-US', {
                weekday: 'long',
                month: 'short',
                day: 'numeric',
                year: 'numeric'
            });
        }

        function formatTime(timestamp) {
            const date = new Date(timestamp * 1000);
            return date.toLocaleTimeString('en-US', {
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function formatDay(timestamp) {
            const date = new Date(timestamp * 1000);
            return date.toLocaleDateString('en-US', {
                weekday: 'short'
            });
        }

        function formatHour(timestamp) {
            const date = new Date(timestamp * 1000);
            return date.toLocaleTimeString('en-US', {
                hour: '2-digit'
            });
        }

        // API Calls
        async function getWeatherByLocation(location) {
            showLoading();
            hideError();

            try {
                // For demo purposes - using mocked data
                // In a real app, use:
                // const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${location}&units=metric&appid=${weatherAPIKey}`);
                // const data = await response.json();

                // Simulate API response
                await new Promise(resolve => setTimeout(resolve, 1000));

                // Demo data
                const data = getMockWeatherData(location);

                // Show weather data
                displayCurrentWeather(data);

                // Get forecast data
                await new Promise(resolve => setTimeout(resolve, 500));
                const forecastData = getMockForecastData(location);
                displayForecast(forecastData);

                // Show hourly forecast
                await new Promise(resolve => setTimeout(resolve, 300));
                const hourlyData = getMockHourlyData(location);
                displayHourlyForecast(hourlyData);

                // Initialize map
                initMap(data.coord.lat, data.coord.lon);

                weatherContent.classList.remove('hidden');
            } catch (error) {
                showError("Could not retrieve weather data. Please try again.");
                console.error("Error fetching weather data:", error);
            } finally {
                hideLoading();
            }
        }

        async function getWeatherByCoordinates(lat, lon) {
            showLoading();
            hideError();

            try {
                // For demo purposes - using mocked data
                // In a real app, use:
                // const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${weatherAPIKey}`);
                // const data = await response.json();

                // Simulate API response
                await new Promise(resolve => setTimeout(resolve, 1000));

                // Demo data
                const data = getMockWeatherData("Your Location", lat, lon);

                // Show weather data
                displayCurrentWeather(data);

                // Get forecast data
                await new Promise(resolve => setTimeout(resolve, 500));
                const forecastData = getMockForecastData("Your Location");
                displayForecast(forecastData);

                // Show hourly forecast
                await new Promise(resolve => setTimeout(resolve, 300));
                const hourlyData = getMockHourlyData("Your Location");
                displayHourlyForecast(hourlyData);

                // Initialize map
                initMap(lat, lon);

                weatherContent.classList.remove('hidden');
            } catch (error) {
                showError("Could not retrieve weather data. Please try again.");
                console.error("Error fetching weather data:", error);
            } finally {
                hideLoading();
            }
        }

        // Display Functions
        function displayCurrentWeather(data) {
            locationName.textContent = data.name;
            currentDate.textContent = formatDate(data.dt);

            // Set weather icon
            const iconClass = weatherIcons[data.weather[0].icon] || 'fas fa-cloud';
            weatherIcon.className = `weather-icon large ${iconClass}`;

            weatherDescription.textContent = data.weather[0].description;
            currentTemp.textContent = `${Math.round(data.main.temp)}°C`;
            feelsLike.textContent = `${Math.round(data.main.feels_like)}°C`;
            windSpeed.textContent = `${Math.round(data.wind.speed * 3.6)} km/h`; // Convert m/s to km/h
            humidity.textContent = `${data.main.humidity}%`;
            pressure.textContent = `${data.main.pressure} hPa`;
            sunrise.textContent = formatTime(data.sys.sunrise);
            sunset.textContent = formatTime(data.sys.sunset);
        }

        function displayForecast(data) {
            forecastContainer.innerHTML = '';

            // Display only one forecast per day
            const dailyForecast = {};

            // Group by day
            data.list.forEach(item => {
                const date = new Date(item.dt * 1000);
                const day = date.toDateString();

                if (!dailyForecast[day] || date.getHours() === 12) { // Prefer noon forecasts
                    dailyForecast[day] = item;
                }
            });

            // Create forecast cards (limit to 5 days)
            Object.values(dailyForecast).slice(0, 5).forEach(day => {
                const iconClass = weatherIcons[day.weather[0].icon] || 'fas fa-cloud';

                const forecastDay = document.createElement('div');
                forecastDay.className = 'forecast-day';
                forecastDay.innerHTML = `
                    <div class="forecast-date">${formatDay(day.dt)}</div>
                    <i class="forecast-icon ${iconClass}"></i>
                    <div class="forecast-temp">${Math.round(day.main.temp)}°C</div>
                    <div class="forecast-temp-min">${Math.round(day.main.temp_min)}°C</div>
                `;

                forecastContainer.appendChild(forecastDay);
            });
        }

        function displayHourlyForecast(data) {
            hourlyContainer.innerHTML = '';

            // Take first 24 hours
            data.list.slice(0, 24).forEach(hour => {
                const iconClass = weatherIcons[hour.weather[0].icon] || 'fas fa-cloud';

                const hourlyItem = document.createElement('div');
                hourlyItem.className = 'hourly-item';
                hourlyItem.innerHTML = `
                    <div class="hourly-time">${formatHour(hour.dt)}</div>
                    <i class="forecast-icon ${iconClass}"></i>
                    <div class="forecast-temp">${Math.round(hour.main.temp)}°C</div>
                `;

                hourlyContainer.appendChild(hourlyItem);
            });
        }

        // Map Initialization
        function initMap(lat, lon) {
            // This is a placeholder for actual map integration
            // In a real app, you would use a mapping library like Leaflet or Google Maps

            const mapDiv = document.getElementById('map');
            mapDiv.innerHTML = `
                <div style="height: 100%; display: flex; align-items: center; justify-content: center; background-color: #1c2035; color: #4ecca3; flex-direction: column;">
                    <i class="fas fa-map-marked-alt" style="font-size: 3rem; margin-bottom: 15px;"></i>
                    <p>Map centered at latitude: ${lat.toFixed(4)}, longitude: ${lon.toFixed(4)}</p>
                    <p style="font-size: 0.9rem; margin-top: 10px; color: #6b7b9c;">
                        (For a functional map, add your preferred mapping library like Leaflet or Google Maps)
                    </p>
                </div>
            `;
        }

        // Mock Data for Demo
        function getMockWeatherData(location, lat = 40.7128, lon = -74.0060) {
            // Generate realistic weather data based on location name
            const seed = location.length;
            const temp = 10 + (seed % 25); // Temperature between 10-35°C

            return {
                name: location,
                dt: Math.floor(Date.now() / 1000),
                coord: { lat, lon },
                weather: [{
                    id: 800,
                    main: "Clear",
                    description: "clear sky",
                    icon: "01d"
                }],
                main: {
                    temp: temp,
                    feels_like: temp - 2,
                    temp_min: temp - 3,
                    temp_max: temp + 2,
                    pressure: 1015,
                    humidity: 40 + (seed % 40)
                },
                wind: {
                    speed: 2 + (seed % 6),
                    deg: seed % 360
                },
                sys: {
                    sunrise: Math.floor(Date.now() / 1000) - 21600, // 6 hours ago
                    sunset: Math.floor(Date.now() / 1000) + 21600, // 6 hours from now
                }
            };
        }

        function getMockForecastData(location) {
            const seed = location.length;
            const baseTemp = 10 + (seed % 25);
            const now = Math.floor(Date.now() / 1000);
            const list = [];

            // Generate 40 entries (5 days, every 3 hours)
            for (let i = 0; i < 40; i++) {
                const hourOffset = i * 3; // 3 hours intervals
                const dayOffset = Math.floor(hourOffset / 24);
                const tempVariation = Math.sin(i / 8 * Math.PI) * 5; // Temperature varies by time of day

                list.push({
                    dt: now + hourOffset * 3600,
                    main: {
                        temp: baseTemp + tempVariation,
                        feels_like: baseTemp + tempVariation - 2,
                        temp_min: baseTemp + tempVariation - 3,
                        temp_max: baseTemp + tempVariation + 2,
                        pressure: 1015,
                        humidity: 40 + (seed % 40)
                    },
                    weather: [{
                        id: 800,
                        main: "Clear",
                        description: "clear sky",
                        icon: dayOffset % 2 === 0 ? "01d" : "02d"
                    }],
                    wind: {
                        speed: 2 + (seed % 6),
                        deg: seed % 360
                    }
                });
            }

            return { list };
        }

        function getMockHourlyData(location) {
            const seed = location.length;
            const baseTemp = 10 + (seed % 25);
            const now = Math.floor(Date.now() / 1000);
            const list = [];

            // Generate 24 entries (24 hours)
            for (let i = 0; i < 24; i++) {
                const tempVariation = Math.sin(i / 24 * Math.PI * 2) * 5; // Temperature varies by time of day

                list.push({
                    dt: now + i * 3600,
                    main: {
                        temp: baseTemp + tempVariation,
                        feels_like: baseTemp + tempVariation - 2,
                        temp_min: baseTemp + tempVariation - 3,
                        temp_max: baseTemp + tempVariation + 2,
                        pressure: 1015,
                        humidity: 40 + (seed % 40)
                    },
                    weather: [{
                        id: 800,
                        main: "Clear",
                        description: "clear sky",
                        icon: i >= 6 && i <= 18 ? "01d" : "01n" // Day from 6am to 6pm
                    }],
                    wind: {
                        speed: 2 + (seed % 6),
                        deg: seed % 360
                    }
                });
            }

            return { list };
        }

        // Initialize with a default location
        getWeatherByLocation("New York");
    </script>
</body>
</html>